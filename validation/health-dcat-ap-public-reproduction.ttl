@prefix : <https://semiceu.github.io/DCAT-AP/releases/3.0.0/html/shacl/shapes.ttl#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix sh: <http://www.w3.org/ns/shacl#>.
@prefix dash: <http://datashapes.org/dash#>.
@prefix adms: <http://www.w3.org/ns/adms#>.
@prefix dcat: <http://www.w3.org/ns/dcat#>.
@prefix dct: <http://purl.org/dc/terms/>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix skos: <http://www.w3.org/2004/02/skos/core#>.
@prefix vcard: <http://www.w3.org/2006/vcard/ns#>.
@prefix dcatap: <http://data.europa.eu/r5r/>.
@prefix dpv: <https://w3id.org/dpv#>.
@prefix dqv: <http://www.w3.org/ns/dqv#>.
@prefix healthdcatap: <http://healthdataportal.eu/ns/health#>.
@prefix csvw: <http://www.w3.org/ns/csvw#>.

:Catalog_Shape
    a sh:NodeShape;
    rdfs:label "Catalog"@en;
    sh:property
            [
                dash:editor dash:URIEditor;
                dash:viewer dash:URIViewer;
                sh:message
                "dcatap:applicableLegislation for dcat:Catalogue is required.";
                sh:minCount 1;
                sh:nodeKind sh:IRI;
                sh:order 0;
                sh:path dcatap:applicableLegislation;
                sh:severity sh:Violation
            ];
    sh:targetClass dcat:Catalog.
:CSVWColumnShape
    a sh:NodeShape;
    sh:property
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:maxCount 1;
                sh:message
                    "Each csvw:Column must have exactly one datatype (csvw:datatype) as a literal (e.g., 'string', 'integer'). See https://w3c.github.io/csvw/metadata/#datatypes";
                sh:minCount 1;
                sh:nodeKind sh:Literal;
                sh:order 3;
                sh:path csvw:datatype
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:message
                    "Each csvw:Column must have at least one description (dct:description) as a literal.";
                sh:minCount 1;
                sh:nodeKind sh:Literal;
                sh:order 1;
                sh:path dct:description
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:message
                    "Each csvw:Column must have at least one name (csvw:name) as a literal.";
                sh:minCount 1;
                sh:nodeKind sh:Literal;
                sh:order 0;
                sh:path csvw:name
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:message
                    "Each csvw:Column must have at least one title (csvw:titles) as a literal.";
                sh:minCount 1;
                sh:nodeKind sh:Literal;
                sh:order 2;
                sh:path csvw:titles
            ],
            [
                dash:editor dash:URIEditor;
                dash:viewer dash:URIViewer;
                sh:maxCount 1;
                sh:message
                    "Each csvw:Column may have at most one property URL (csvw:propertyUrl), which must be a valid IRI referencing a semantic property.";
                sh:nodeKind sh:IRI;
                sh:order 4;
                sh:path csvw:propertyUrl;
                sh:severity sh:Violation
            ];
    sh:targetClass csvw:Column.
:CSVWTableGroup_Shape
    a sh:NodeShape;
    rdfs:label "Csvw Table Group"@en;
    sh:property
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:message
                    "Each csvw:TableGroup must have at least one Table (csvw:table).";
                sh:minCount 1;
                sh:order 0;
                sh:path csvw:table;
                sh:severity sh:Violation
            ];
    sh:targetClass csvw:TableGroup.
:CSVWTableShape
    a sh:NodeShape;
    sh:property
            [
                dash:editor dash:DetailsEditor;
                dash:viewer dash:DetailsViewer;
                sh:node :CSVWColumnShape;
                sh:order 4;
                sh:path csvw:column;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:message
                    "Each csvw:Table must have at least one column (csvw:column) defined as a blank node or IRI.";
                sh:minCount 1;
                sh:nodeKind sh:BlankNodeOrIRI;
                sh:order 3;
                sh:path csvw:column;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:message
                    "Each csvw:Table must have at least one title (dct:title) as a literal.";
                sh:minCount 1;
                sh:nodeKind sh:Literal;
                sh:order 1;
                sh:path dct:title;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:message
                    "Each csvw:Table should have one or many keyword (dcat:keyword) as a literal.";
                sh:nodeKind sh:Literal;
                sh:order 2;
                sh:path dcat:keyword;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:URIEditor;
                dash:viewer dash:URIViewer;
                sh:maxCount 1;
                sh:message
                    "Each csvw:Table must have at most one valid URL (csvw:url) as an IRI.";
                sh:nodeKind sh:IRI;
                sh:order 0;
                sh:path csvw:url;
                sh:severity sh:Violation
            ];
    sh:targetClass csvw:Table.
:Dataset_Shape
    a sh:NodeShape;
    rdfs:label "Dataset"@en;
    sh:property
            [
                dash:editor dash:DetailsEditor;
                dash:viewer dash:DetailsViewer;
                sh:maxCount 1;
                sh:message
                    "Each dcat:Dataset must have at most one healthdcatap:retentionPeriod as a dct:PeriodOfTime.";
                sh:node :PeriodOfTime_Shape;
                sh:order 26;
                sh:path healthdcatap:retentionPeriod;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:DetailsEditor;
                dash:viewer dash:DetailsViewer;
                sh:message
                "Each dcat:Dataset must have at least one dcat:distribution.";
                sh:minCount 1;
                sh:node :Distribution_Shape;
                sh:order 3;
                sh:path dcat:distribution;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:DetailsEditor;
                dash:viewer dash:DetailsViewer;
                sh:message
                    "dct:publisher must conform to the :HealthPublisherAgent_Shape, which requires exactly one dcat:contactPoint, at most one dct:description and at most one healthdcatap:trustedDataHolder";
                sh:node :HealthPublisherAgent_Shape;
                sh:order 6;
                sh:path dct:publisher;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:DetailsEditor;
                dash:viewer dash:DetailsViewer;
                sh:message
                    "healthdcatap:hdab must conform to the :HealthAgent_Shape, which requires exactly one dcat:contactPoint.";
                sh:node :HealthAgent_Shape;
                sh:order 11;
                sh:path healthdcatap:hdab;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:DetailsEditor;
                dash:viewer dash:DetailsViewer;
                sh:node :Distribution_Shape;
                sh:order 17;
                sh:path healthdcatap:analytics;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:DetailsEditor;
                dash:viewer dash:DetailsViewer;
                sh:node :Distribution_Shape;
                sh:order 7;
                sh:path adms:sample;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:DetailsEditor;
                dash:viewer dash:DetailsViewer;
                sh:node :HasCodeValues_Shape;
                sh:nodeKind sh:BlankNodeOrIRI;
                sh:order 18;
                sh:path healthdcatap:hasCodeValues;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:datatype xsd:nonNegativeInteger;
                sh:maxCount 1;
                sh:message
                    "Each dcat:Dataset must have at most one healthdcatap:maxTypicalAge as a xsd:nonNegativeInteger.";
                sh:order 21;
                sh:path healthdcatap:maxTypicalAge;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:datatype xsd:nonNegativeInteger;
                sh:maxCount 1;
                sh:message
                    "Each dcat:Dataset must have at most one healthdcatap:minTypicalAge as a xsd:nonNegativeInteger.";
                sh:order 20;
                sh:path healthdcatap:minTypicalAge;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:datatype xsd:nonNegativeInteger;
                sh:maxCount 1;
                sh:message
                    "Each dcat:Dataset must have at most one healthdcatap:numberOfRecords as a xsd:nonNegativeInteger.";
                sh:order 22;
                sh:path healthdcatap:numberOfRecords;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:datatype xsd:nonNegativeInteger;
                sh:maxCount 1;
                sh:message
                    "Each dcat:Dataset must have at most one healthdcatap:numberOfUniqueIndividuals as a xsd:nonNegativeInteger.";
                sh:order 23;
                sh:path healthdcatap:numberOfUniqueIndividuals;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:maxCount 1;
                sh:message
                "Each dcat:Dataset may have at most one dct:publisher.";
                sh:nodeKind sh:BlankNodeOrIRI;
                sh:order 5;
                sh:path dct:publisher;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:maxCount 1;
                sh:message
                "Each dcat:Dataset must have exactly one healthdcatap:hdab";
                sh:minCount 1;
                sh:nodeKind sh:BlankNodeOrIRI;
                sh:order 10;
                sh:path healthdcatap:hdab;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:message
                "Each dcat:Dataset must have at least one dct:identifier.";
                sh:minCount 1;
                sh:nodeKind sh:Literal;
                sh:order 4;
                sh:path dct:identifier;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:nodeKind sh:BlankNodeOrIRI;
                sh:order 0;
                sh:path dct:source;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:nodeKind sh:BlankNodeOrIRI;
                sh:order 13;
                sh:path healthdcatap:healthTheme;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:nodeKind sh:BlankNodeOrIRI;
                sh:order 19;
                sh:path healthdcatap:hasCodingSystem;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:nodeKind sh:BlankNodeOrIRI;
                sh:order 9;
                sh:path dpv:hasPurpose;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:nodeKind sh:Literal;
                sh:order 24;
                sh:path healthdcatap:populationCoverage;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:nodeKind sh:Literal;
                sh:order 25;
                sh:path dct:alternative;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:order 14;
                sh:path dpv:hasLegalBasis;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:order 15;
                sh:path dpv:hasPersonalData;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:order 16;
                sh:path dqv:hasQualityAnnotation;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:URIEditor;
                dash:viewer dash:URIViewer;
                sh:hasValue
                    <http://publications.europa.eu/resource/authority/access-right/PUBLIC>;
                sh:maxCount 1;
                sh:message
                    "Each Dataset must have exactly one dct:accessRights, and its value must be http://publications.europa.eu/resource/authority/access-right/PUBLIC.";
                sh:minCount 1;
                sh:nodeKind sh:IRI;
                sh:order 1;
                sh:path dct:accessRights;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:URIEditor;
                dash:viewer dash:URIViewer;
                sh:message
                "Each dcat:Dataset must have at least one dcat:theme.";
                sh:minCount 1;
                sh:nodeKind sh:IRI;
                sh:order 8;
                sh:path dcat:theme;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:URIEditor;
                dash:viewer dash:URIViewer;
                sh:message
                    "Each dcat:Dataset must have at least one dcatap:applicableLegislation.";
                sh:minCount 1;
                sh:nodeKind sh:IRI;
                sh:order 2;
                sh:path dcatap:applicableLegislation;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:URIEditor;
                dash:viewer dash:URIViewer;
                sh:message
                    "Each dcat:Dataset must have at least one healthdcatap:healthCategory.";
                sh:minCount 1;
                sh:nodeKind sh:IRI;
                sh:order 12;
                sh:path healthdcatap:healthCategory;
                sh:severity sh:Violation
            ];
    sh:targetClass dcat:Dataset.
:DatasetSeries_Shape
    a sh:NodeShape;
    rdfs:label "Dataset Series"@en;
    sh:property
            [
                dash:editor dash:URIEditor;
                dash:viewer dash:URIViewer;
                sh:message
                    "A dcatap:applicableLegislation for dcat:DatasetSeries is required.";
                sh:minCount 1;
                sh:nodeKind sh:IRI;
                sh:order 0;
                sh:path dcatap:applicableLegislation;
                sh:severity sh:Violation
            ];
    sh:targetClass dcat:DatasetSeries.
:Distribution_Shape
    a sh:NodeShape;
    rdfs:label "Distribution"@en;
    sh:property
            [
                dash:editor dash:URIEditor;
                dash:viewer dash:URIViewer;
                sh:message
                    "dcatap:applicableLegislation for dcat:Distribution is required.";
                sh:minCount 1;
                sh:nodeKind sh:IRI;
                sh:order 0;
                sh:path dcatap:applicableLegislation;
                sh:severity sh:Violation
            ];
    sh:targetClass dcat:Distribution.
:HasCodeValues_Shape
    a sh:NodeShape;
    rdfs:label "hasCodeValue"@en;
    sh:property
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:datatype xsd:anyURI;
                sh:nodeKind sh:Literal;
                sh:order 0;
                sh:path dct:identifier;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:URIEditor;
                dash:viewer dash:URIViewer;
                sh:nodeKind sh:IRI;
                sh:order 1;
                sh:path skos:inScheme;
                sh:severity sh:Violation
            ].
:HealthAgent_Shape
    a sh:NodeShape;
    rdfs:label "Health Agent"@en;
    sh:property
            [
                dash:editor dash:DetailsEditor;
                dash:viewer dash:DetailsViewer;
                sh:class vcard:Kind;
                sh:maxCount 1;
                sh:message
                "Each Health Agent must have exactly one dcat:contactPoint.";
                sh:minCount 1;
                sh:order 0;
                sh:path dcat:contactPoint;
                sh:severity sh:Violation
            ].
:HealthPublisherAgent_Shape
    a sh:NodeShape;
    rdfs:label "Health Publisher Agent"@en;
    sh:property
            [
                dash:editor dash:BooleanSelectEditor;
                dash:viewer dash:LiteralViewer;
                sh:datatype xsd:boolean;
                sh:description
                    "Each dct:publisher must have at most one healthdcatap:trustedDataHolder with a boolean value.";
                sh:maxCount 1;
                sh:order 2;
                sh:path healthdcatap:trustedDataHolder;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:DetailsEditor;
                dash:viewer dash:DetailsViewer;
                sh:class vcard:Kind;
                sh:description
                "Each foaf:Agent must have exactly one dcat:contactPoint.";
                sh:maxCount 1;
                sh:minCount 1;
                sh:order 0;
                sh:path dcat:contactPoint;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:TextFieldEditor;
                dash:viewer dash:LiteralViewer;
                sh:description
                    "Each dct:publisher must have at most one dct:description (Publisher Note) as a literal.";
                sh:maxCount 1;
                sh:nodeKind sh:Literal;
                sh:order 1;
                sh:path dct:description;
                sh:severity sh:Violation
            ].
:Kind_Shape
    a sh:NodeShape;
    rdfs:comment
        "vcard Kind must have at least one of vcard:hasURL or vcard:hasEmail as an IRI";
    rdfs:label "vcard Kind";
    sh:property
            [
                dash:editor dash:URIEditor;
                dash:viewer dash:URIViewer;
                sh:maxCount 1;
                sh:nodeKind sh:IRI;
                sh:order 1;
                sh:path vcard:hasURL;
                sh:severity sh:Violation
            ],
            [
                dash:editor dash:URIEditor;
                dash:viewer dash:URIViewer;
                sh:maxCount 1;
                sh:nodeKind sh:IRI;
                sh:order 2;
                sh:path vcard:hasEmail;
                sh:severity sh:Violation
            ];
    sh:targetClass vcard:Kind.
